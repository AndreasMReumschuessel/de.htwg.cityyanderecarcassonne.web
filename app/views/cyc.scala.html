@(controller: de.htwg.cityyanderecarcassonne.controller.ICarcassonneController)

@main("City Yandere Carcassonne") {
    <div class="game">
        <div class="row gamecontent">
            @if(controller.getTownsquare != null){
                <div class="col-xs-12 col-md-10 townsquare">
                    @for(row <- 0 until controller.getDimensionY) {
                        <div class="row">
                        <div class="col-xs-12 tsRow">
                            @for(column <- 0 until controller.getDimensionX) {
                                <div class="tsColumn" id="@({row + "_" + column})">
                                    @if(controller.getTownsquare.getCard(column, row) != null) {
                                        <img class="img-responsive" src="@routes.Assets.versioned("cyc-data/" + {
                                            var cardClassName = controller.getTownsquare.getCard(column, row).getClass.getName
                                            var cardName = cardClassName.substring(cardClassName.lastIndexOf('.') + 1)
                                            cardName
                                        } + ".png")" />
                                    }
                                </div>
                            }
                        </div>
                        </div>
                    }
                </div>
            }
            <div class="col-xs-3 col-md-2 gameinfo">
                <div class="currentcard">
                    @if(controller.cardOnHand() != null) {
                        Current card<br>
                        <img class="img-responsive" src="@routes.Assets.versioned("cyc-data/" + {
                            var cardClassName = controller.cardOnHand.getClass.getName
                            var cardName = cardClassName.substring(cardClassName.lastIndexOf('.') + 1)
                            cardName
                        } + ".png")" />
                    }
                </div>
                <div class="cardsleft">
                    Cards remaining: @(controller.getRemainingCards)
                </div>
                <div class="roundcontroller">
                    <button id="roundctrl">Start Game</button>
                </div>
                <div class="rotator">
                    <button id="rotleft">Rotate left</button><button id="rotright">Rotate right</button>
                </div>
                <div class="playerpanel">
                    Player:
                    <div class="playerlist">
                        @for(player <- controller.getPlayers) {
                            <div class="player @if(player == controller.getCurrentPlayer) {active}">
                            @if((player != null) && (player.getName != null)) {
                                @{
                                    player.getSumMeeples + " : " + player.getName + " : " + player.getScore
                                }
                            }
                            </div>
                        }
                    </div>
                    <button type="button" id="addplayer" class="btn btn-default" data-toggle="modal" data-target="#addPlayerModal">Add Player!</button>
                </div>
            </div>
        </div>
        <div class="textinput">
            @helper.form(action = routes.CarcassonneWebController.cycarcassonnePost()) {
                <input type="text" name="command" autofocus />
                <input type="submit" value="Send command" />
            }
        </div>
    </div>

    <!-- AddPlayerModal -->
    <div id="addPlayerModal" class="modal fade" role="dialog">
        <div class="modal-dialog">

            <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title">Let's add a new player!</h4>
                </div>
                <div class="modal-body">
                    Name:&nbsp;
                    <input type="text" id="playername" autofocus/>
                </div>
                <div class="modal-footer">
                    <button type="button" id="addplayerbtn" class="btn btn-default" data-dismiss="modal">Add Player</button>
                </div>
            </div>

        </div>
    </div>

    <script src="@routes.Assets.versioned("javascripts/cyc.js")" type="text/javascript"></script>
}